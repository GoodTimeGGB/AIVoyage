### **项目原型文档：智行鸿蒙 - AI驱动的全链路智能出行助手**
**版本：** 1.0 (MVP原型)
**目标平台：** 鸿蒙原生APP
**开发工具：** AI IDE (Trae / Kiro)
**核心依赖：** 高德开放平台API、大语言模型API
---
#### **1. 项目愿景与核心价值**
**1.1 愿景**
重新定义人车交互与出行体验，将高德地图的空间智能能力与AI大模型的自然语言理解能力深度融合，打造一个“听得懂、会思考、能预判”的主动式出行伙伴。
**1.2 核心价值**
*   **解放双手与心智：** 用户只需通过自然语言对话，即可完成从规划到导航的全过程，无需在多个选项间繁琐操作。
*   **全链路智能决策：** 不仅是路径规划，更是结合实时交通、天气、用户偏好、车辆状态（如电量）的综合出行方案。
*   **主动式服务：** 从“人找服务”到“服务找人”，在出行途中主动预警风险、推荐服务、动态调整路线。
---
#### **2. 核心用户故事**
**故事1：复杂通勤**
> 用户对手机说：“明天早上9点要到国贸，帮我规划一条最快且不堵车的路线，顺便看看路上有没有合适的咖啡店可以带一杯。”
> **系统响应：**
> 1.  理解“明天9点”、“国贸”、“最快”、“不堵车”、“咖啡店”等多个意图。
> 2.  调用高德路径规划API，结合历史和预测数据，提供3条备选路线（最快、最短、推荐）。
> 3.  在推荐路线上，用POI搜索API筛选出评分高、顺路的咖啡店，并在地图上标注。
> 4.  语音播报：“已为您规划最优路线，全程预计35分钟，途中有两家评分4.8以上的咖啡店，需要导航过去吗？”
**故事2：动态应急**
> 用户正在驾车导航，高德API推送前方路段突发事故。
> **系统响应：**
> 1.  实时接收到高德路况事件API的推送。
> 2.  AI引擎立刻重新计算替代路线，并评估时间损失。
> 3.  弹出卡片+语音播报：“前方发生事故，预计拥堵20分钟，已为您找到一条替代路线，只比原计划多5分钟，是否切换？”
---
#### **3. 核心功能模块**
**模块1：智能对话引擎**
*   **功能：** 负责接收并解析用户的自然语言输入（语音/文字）。
*   **AI实现：** 调用大语言模型API（如豆包、通义千问），将模糊的自然语言转换为结构化的机器指令（如：`{action: "plan_route", origin: "当前位置", destination: "国贸", time: "09:00", preferences: ["fastest", "coffee_shop"]}`）。
*   **鸿蒙UI组件：** 基于ArkUI的对话框界面，包含语音输入按钮和文本输入框。
**模块2：多模态路径规划核心**
*   **功能：** 应用的大脑，负责整合所有数据，生成最优出行方案。
*   **高德API调用：**
    *   `路径规划API` (驾车/步行/骑行/公交)
    *   `实时交通API`
    *   `天气查询API`
    *   `POI搜索API`
*   **AI逻辑：** 设计一个评分算法，综合时间、距离、路况、费用、天气影响、用户偏好，为每条路线打分，最终推荐最优解。
**模块3：动态情景感知服务**
*   **功能：** 在导航过程中，作为后台服务持续监听环境变化。
*   **实现方式：**
    *   订阅高德路况事件WebSocket，实现实时推送。
    *   定时轮询天气API，监测天气突变（如暴雨、大雾）。
    *   （未来扩展）与车辆API对接，获取电量、油量信息。
*   **鸿蒙能力：** 使用`Ability`的后台能力，或`Extension`来在后台运行。
**模块4：鸿蒙原生交互界面**
*   **功能：** 将所有信息以最符合鸿蒙生态的方式呈现给用户。
*   **核心组件：**
    *   **地图Ability：** 集成高德地图SDK，展示路线、POI、实时路况。
    *   **导航Ability：** 提供AR导航、路口放大图等沉浸式导航体验。
    *   **语音助手：** 深度集成小艺，实现全场景语音交互。
    *   **元服务卡片：** 在桌面提供“一键回家”、“通勤路况”等快捷入口，无需打开APP。
---
#### **4. 技术架构**
```
+-------------------------------------------------+
|             鸿蒙原生APP (ArkUI/ArkTS)           |
|  +-----------------+  +-----------------------+  |
|  |  UI Ability     |  |  Service Ability      |  |
|  | (地图/对话/设置)|  | (后台监听/任务调度)   |  |
|  +-----------------+  +-----------------------+  |
+-------------------------------------------------+
                        |
                        v
+-------------------------------------------------+
|              业务逻辑层                          |
|  (对话引擎、路径规划算法、推荐逻辑)              |
+-------------------------------------------------+
                        |
                        v
+-------------------------------------------------+
|  数据与AI层                                     |
|  +----------------+  +------------------------+ |
|  | 高德开放平台API |  | 大语言模型(LLM) API    | |
|  | - 路径规划      |  | - 自然语言理解         | |
|  | - 实时交通      |  | - 指令结构化           | |
|  | - POI搜索       |  +------------------------+ |
|  | - 天气查询      |                            |
|  +----------------+                            |
+-------------------------------------------------+
```